(function(a){a(document).ready(function(){function c(){var h=window.parent.wp.customize,g=a(".devices button.active").attr("data-device");h.bind("change",function(j){var i=a(".devices button.active").attr("data-device");h.control("wr_preview").setting.set(i)});a(document).on("click",".devices button",function(){var j=a(this),i=j.attr("data-device");if(g==i){return}if(!((g=="mobile"&&i=="tablet")||(g=="tablet"&&i=="mobile"))){h.control("wr_preview").setting.set(i);h.previewer.refresh()}g=i})}a("#customize-theme-controls img").each(function(g,h){a(h).data("src",a(h).attr("src")).removeAttr("src")});function f(){if(!a("#customize-theme-controls > ul").children("li").length){return setTimeout(f,100)}var o=wp.customize.control("wc_archive_catalog_mode").setting;function q(){if(o.get()===true){a("#accordion-section-wc_cart, #accordion-section-wc_checkout, #accordion-section-wc_thankyou, #accordion-section-wc_buynow").each(function(t,u){if(!a(u).children(".wr-mask").length){var n=a('<div class="wr-mask wr-mask-big has-tip" />').append(a('<span class="dashicons dashicons-warning"></span>').attr("title",wr_customize_messages.wc_catalog_mode_enabled_warning)).tooltip({track:true});a(u).css("position","relative").append(n)}})}else{a("#accordion-section-wc_cart, #accordion-section-wc_checkout, #accordion-section-wc_thankyou, #accordion-section-wc_buynow").find(".wr-mask").remove()}}o.bind("change",function(i){q()});q();function h(i){a(i).removeClass("description customize-control-description").addClass("fa fa-question-circle has-tip").attr("title",a(i).text()).css({position:"absolute",top:0,right:0}).empty().parent().addClass("clearfix");a(i).tooltip({track:true})}a(".customize-control-description").each(function(n,t){h(t)});a(".wr-radio-image").tooltip({track:true});function s(i){if(i.find(".has-tip").length||!i.find(".customize-control-description").length){i[0].wr_recreate_tooltip_timer=setTimeout(function(){s(i)},100)}else{h(i.find(".customize-control-description"));if(i[0].wr_recreate_tooltip_timer){clearTimeout(i[0].wr_recreate_tooltip_timer)}}}a("#customize-control-site_icon").on("click",".actions button",function(){s(a("#customize-control-site_icon"))});if(window.WR_Nitro_Customize_Controls_Dependencies){function r(n,z){var y,u,w,A,t,v,B;y=a("#customize-control-"+n);w="hide";if(WR_Nitro_Customize_Controls_Dependencies[n].dependency_failed_action){w=WR_Nitro_Customize_Controls_Dependencies[n].dependency_failed_action}A="AND";if(WR_Nitro_Customize_Controls_Dependencies[n].logical_operator){switch(WR_Nitro_Customize_Controls_Dependencies[n].logical_operator.toUpperCase()){case"|":case"||":case"OR":A="OR";break;default:A="AND";break}}u=A=="AND"?true:false;for(var x in WR_Nitro_Customize_Controls_Dependencies[n]){if(x=="logical_operator"||x=="dependency_failed_action"){continue}t=WR_Nitro_Customize_Controls_Dependencies[n][x].split(/\s+/);if(t.length<3){continue}v=null;wp.customize.control.each(function(D,i){if(!v&&i==t[0]){v=D}});if(!v){continue}value=v.setting.get();if(value===true){value=1}else{if(value===false){value=0}}if(typeof value=="string"&&value.match(/^\d+$/)){value=parseInt(value)}if(B=t[2].match(/^['"](.*)['"]$/)){B=B[1].split("|");for(var x in B){if(typeof B[x]=="string"&&B[x].match(/^\d+$/)){B[x]=parseInt(B[x])}}}else{if(t[2].match(/^\d+$/)){B=[parseInt(t[2])]}else{B=[t[2]]}}switch(t[1]){case"=":case"==":if(A=="AND"&&a.inArray(value,B)<0){u=u&&false}else{if(A=="OR"&&a.inArray(value,B)>-1){u=u||true}}break;case"!=":if(A=="AND"&&a.inArray(value,B)>-1){u=u&&false}else{if(A=="OR"&&a.inArray(value,B)<0){u=u||true}}break}if(z){v.setting.bind("change",function(i){r(n)})}else{if(A=="AND"&&!u){break}if(A=="OR"&&u){break}}}if(u){y.removeClass("hidden");if(y.children(".wr-mask").length){y.children(".wr-mask").remove()}}else{if(wp.customize.control(n).section()==v.section()&&w=="hide"){y.addClass("hidden")}else{if(!y.children(".wr-mask").length){var C=a('<div class="wr-mask wr-mask-small has-tip" />').attr("title",wr_customize_messages.disabled_because_of_dependency);y.append(C);C.tooltip({track:true})}}}}for(var j in WR_Nitro_Customize_Controls_Dependencies){r(j,true)}}var l=["custom_color","content_body_color","content_meta_color","general_line_color","general_overlay_color","general_fields_bg","wr_general_container_color"];for(var p=0,k=l.length;p<k;p++){wp.customize.control(l[p]).setting.bind("change",function(){setTimeout(function(){var y=document.querySelector("#customize-control-color_profile .wr-image-selected .colors-preset"),x=wp.customize.control("color_profile").setting.get(),v=document.querySelector('#customize-control-color_profile input[value="'+x+'"]'),w=v.previousElementSibling;for(var u=0,z=l.length;u<z;u++){var t=l[u]=="content_body_color"?wp.customize.control(l[u]).setting.get().heading_text:wp.customize.control(l[u]).setting.get();y.children[u].style.backgroundColor=t?t:"transparent";w.children[u].style.backgroundColor=t?t:"transparent"}},100)})}a(document).ajaxSend(function(i,n){if(i.currentTarget.activeElement.getAttribute("data-customize-setting-link")=="expert_mode"){n.abort();if(a("#customize-preview iframe")[0].contentWindow.jQuery.check_effective_panels){a("#customize-preview iframe")[0].contentWindow.jQuery.check_effective_panels()}}if(a(i.currentTarget.activeElement).closest('[id^="accordion-panel-"]').data("disabled")){n.abort()}});a.wr_override_thickbox=function(){a('a[target="thickbox"]').each(function(n,t){if(!a(t).prop("wr_override_thickbox")){a(t).click(function(y){y.preventDefault();var x=a(this).attr("data-width"),i=a(this).attr("data-height");if(x.substr(-1)=="%"){x=a(window).width()*(parseInt(x)/100)}if(i.substr(-1)=="%"){i=a(window).height()*(parseInt(i)/100)}var w=a(this).attr("href")+(a(this).attr("href").indexOf("?")>-1?"&":"?")+"width="+x+"&height="+i;tb_show(a(this).attr("title"),w);var u=this,v=function(){var A=a(u).attr("data-width"),z=a(u).attr("data-height");if(A.substr(-1)=="%"){A=a(window).width()*(parseInt(A)/100)}if(z.substr(-1)=="%"){z=a(window).height()*(parseInt(z)/100)}TB_WIDTH=(A*1)+30;TB_HEIGHT=(z*1)+40;ajaxContentW=TB_WIDTH-30;ajaxContentH=TB_HEIGHT-45;a("#TB_ajaxContent").css({width:ajaxContentW,height:ajaxContentH});a("#TB_iframeContent").css({width:ajaxContentW+29,height:ajaxContentH+17});tb_position()};a(window).on("resize",v);a("#TB_closeWindowButton, #TB_overlay").click(function(){a(window).off("resize",v)});return false});a(t).prop("wr_override_thickbox",true)}})};a.wr_override_thickbox();var m={};a.wr_load_delayed_sources=function(){function t(u,v){var i=u=="css"?v:a(v).data("src"),w=function(){if(u=="css"){a("head").append('<link rel="stylesheet" href="'+v+'" type="text/css" media="all" />')}else{a(v).attr("src",a(v).data("src")).removeData("src")}};if(!m[i]){a.ajax({timeout:500,url:i,complete:function(x){if(x.status==200){w()}m[i]=true}})}else{w()}}if(window.runtime_delayed_sources){for(var n in runtime_delayed_sources){t("css",runtime_delayed_sources[n])}delete window.runtime_delayed_sources}if(window.nitro_lazy_load_sources){for(var n in nitro_lazy_load_sources){t("css",nitro_lazy_load_sources[n])}delete window.nitro_lazy_load_sources}a("#customize-theme-controls img").each(function(u,v){if(a(v).data("src")){t("img",v)}})};function g(){a("#customize-header-actions").prepend(a("#wr_customize_spotlight_search_template").text());a("#wr_customize_spotlight_search .search-for").click(function(i){if(i.target.value!=""){a("#wr_customize_spotlight_search .search-results").removeClass("hidden")}}).keyup(function(n){var i=a("#wr_customize_spotlight_search .search-results").empty();if(n.target.value!=""&&n.target.value.length>1){a("li.customize-control .customize-control-title").each(function(t,x){var v=a(x).closest("li.customize-control");if(!v.hasClass("hidden")){if(x.textContent.toLowerCase().indexOf(n.target.value.toLowerCase())>-1){var w=[],u=x.parentNode,y;while(u.id!="customize-theme-controls"&&u.nodeName!="BODY"){if(u.id.indexOf("sub-accordion-")==0||u.parentNode.id.indexOf("sub-accordion-")==0){u=document.querySelector('li[aria-owns="'+(u.id.indexOf("sub-accordion-")==0?u.id:u.parentNode.id)+'"] ')}y=a(u).children("h3");y=y.text().replace(y.children("span").text(),"");if(a.trim(y)){w.unshift(y)}u=u.parentNode;if(u.classList.contains("customize-pane-parent")){if(u.parentNode.id=="customize-theme-controls"){break}}}result=a('<a href="javascript:void(0)">').attr("data-target",a(x).closest(".customize-control").attr("id")).append("<h4>"+a(x).text()+"</h4>").append("<small>"+w.join(" \\ ")+"</small>").click(function(A){A.preventDefault();var B=A.target.nodeName=="A"?a(A.target):a(A.target).closest("a");B=a("#"+B.attr("data-target"));i.addClass("hidden");var z=B.closest(".control-section");if(!z.hasClass("open")){if(z.attr("id").indexOf("sub-accordion-")==0){z=a('li[aria-owns="'+z.attr("id")+'"]')}z.children("h3").trigger("click")}B.addClass("highlight");setTimeout(function(){B.closest(".accordion-section-content").animate({scrollTop:B.offset().top-a("#customize-header-actions").height()},1000)},200);setTimeout(function(){B.removeClass("highlight")},5000)});i.append(result)}}});if(i.children().length){return i.removeClass("hidden")}}a("#wr_customize_spotlight_search .search-results").addClass("hidden")});a(window).resize(function(){if(this.wr_customize_spotlight_search_resize_timeout){clearTimeout(this.wr_customize_spotlight_search_resize_timeout)}this.wr_customize_spotlight_search_resize_timeout=setTimeout(function(){var n=document.querySelector("button.collapse-sidebar").getBoundingClientRect(),i=document.getElementById("customize-header-actions").getBoundingClientRect();a("#wr_customize_spotlight_search .search-results").css("max-height",n.top-i.bottom)},500)}).trigger("resize");a(document).click(function(t){var i=a("#wr_customize_spotlight_search .search-results"),n=a(t.target).closest("#wr_customize_spotlight_search");if(!i.hasClass("hidden")&&!n.length){i.addClass("hidden")}})}g()}function d(){a(".move-to-section").click(function(h){h.preventDefault();var g=a(this).data("section");wp.customize.section(g).focus();a(".accordion-section-content").css("margin-top","0")})}function e(){a(".move-to-panel").click(function(h){h.preventDefault();var g=a(this).data("section");wp.customize.panel(g).focus();a(".accordion-section-content").css("margin-top","0")})}function b(){var g=a('<div class="customize-bar"><div class="action"></div></div>');a("#customize-controls").after(g);a(".devices").detach().appendTo(".customize-bar");a(".devices").children("button").siblings().removeClass("active");a(".preview-desktop").addClass("active");a(".devices").children("button").on("click",function(){a(this).addClass("active").siblings().removeClass("active")})}window.wr_click_outside=function(g,h,j){a(window).on("mousedown",function i(l){var m=a(h).index(g.closest(h));var k=a(h).index(a(l.target).closest(h));if(m!=k){a(window).off("mousedown");j.call(l)}})};c();f();d();e();b()})})(jQuery);
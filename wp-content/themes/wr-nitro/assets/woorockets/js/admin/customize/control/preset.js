(function(a){a.WR_Preset_Control=function(c){var b=this;b.data=c;b.init()};a.WR_Preset_Control.prototype={init:function(){var b=this;b.container=a("#wr-"+wr_nitro_customize_preset.type+"-"+b.data.id);b.container.find(".wr-image-selected").click(function(c){var d=a(this);d.next().toggle();window.wr_click_outside(d,".customize-control-content",function(f){d.next().hide()});c.stopPropagation()});b.container.find(".wr-select-image").click(function(){a(this).closest(".wr-select-image-container").hide();if(!a(this).hasClass("selected")){var g=a(this).find("input").val();b.container.find(".wr-image-selected").attr("class","wr-image-selected "+g).attr("data-title",a(this).data("title"));a(this).addClass("selected").siblings().removeClass("selected");a(this).children("input").attr("checked","checked");a(this).siblings().children("input").removeAttr("checked");wp.customize.control(b.data.id).setting.set(g);if(b.data.preset[g]&&b.data.preset[g].data){for(var d in b.data.preset[g].data){var h=wp.customize.control(d);if(h){var f=b.data.preset[g].data[d];switch(h.params.type){case"colors":if(typeof f=="string"){a(h.selector).find('input[type="text"]').attr("default-value",f).spectrum("set",f).parent().children(".color-hex").text(f)}else{for(var c in f){a(h.selector).find('input[name="'+c+'"]').attr("default-value",f[c]).spectrum("set",f[c]).parent().children(".color-hex").text(f[c])}}break;case"radio-image":a(h.selector).find('input[type="radio"]:checked').removeAttr("checked").parent().removeClass("selected");a(h.selector).find('input[value="'+f+'"]').attr("checked","checked").parent().addClass("selected");break;case"select-image":a(h.selector).find('input[type="radio"]:checked').removeAttr("checked").parent().removeClass("selected");a(h.selector).find('input[value="'+f+'"]').attr("checked","checked").parent().addClass("selected");a(h.selector).find(".wr-image-selected").attr("class","wr-image-selected "+f);break;case"slider":a(h.selector).find('input[type="range"]').attr("default-value",f).next("div").slider("option","value",f);break;case"toggle":if(f){a(h.selector).find('input[type="checkbox"]').attr("checked","checked")}else{a(h.selector).find('input[type="checkbox"]').removeAttr("checked")}break;case"typography":var e=a(h.selector).find('input[name="family"]:checked').val();a(h.selector).find('input[name="family"]:checked').removeAttr("checked").parent().removeClass("selected");a(h.selector).find('input[value="'+f.family+'"]').attr("checked","checked").parent().addClass("selected");if(e){a(h.selector).find(".wr-image-selected").removeClass(e.toLowerCase())}a(h.selector).find(".wr-image-selected").addClass(f.family.toLowerCase());a(h.selector).find('input[type="checkbox"]').each(function(){if(f[a(this).attr("name")]){a(this).attr("checked","checked").parent().addClass("active")}else{a(this).removeAttr("checked").parent().removeClass("active")}});a(h.selector).find('input[name="color"]').spectrum("set",f.color).parent().children(".font-color").text(f.color?f.color:"");break;case"checkbox":if(f){a(h.selector).find('input[type="checkbox"]').attr("checked","checked")}else{a(h.selector).find('input[type="checkbox"]').removeAttr("checked")}break;case"date":a(h.selector).find('input[type="date"]').val(f);break;case"number":a(h.selector).find('input[type="number"]').val(f);break;case"radio":a(h.selector).find('input[type="radio"]:checked').removeAttr("checked");a(h.selector).find('input[value="'+f+'"]').attr("checked","checked");break;case"text":a(h.selector).find('input[type="text"]').val(f);break;case"select":case"option":a(h.selector).find("select").val(f);break;case"textarea":a(h.selector).find("textarea").val(f);break}h.setting.set(f)}}}a("[data-customize-setting-link]").trigger("change")}});wp.customize.bind("change",function(e){var f=wp.customize.control(b.data.id).setting.get();if("custom"==f){return}if(b.data.preset[f].data[e.id]&&b.data.preset[f].data[e.id]!=e.get()){if(!b.data.preset.custom){b.data.preset.custom={title:wr_nitro_customize_preset.custom_preset_title,data:{}}}b.data.preset.custom.data[e.id]=e.get();var d=b.container.find('input[value="custom"]');if(!d.length){d=a('<li class="wr-select-image custom">').attr("data-title",wr_nitro_customize_preset.custom_preset_title).html('<input type="radio" name="'+b.data.id+'" value="custom">').appendTo(b.container.find("ul.wr-select-image-container"));var g=a('<ul class="colors-preset" />');for(var c=0;c<7;c++){g.append("<li />")}d.find('input[value="custom"]').before(g)}else{d=d.parent()}b.container.find(".wr-image-selected").attr("class","wr-image-selected custom").attr("data-title",wr_nitro_customize_preset.custom_preset_title);d.addClass("selected").siblings().removeClass("selected");d.children("input").attr("checked","checked");d.siblings().children("input").removeAttr("checked");wp.customize.control(b.data.id).setting.set("custom")}})}}})(jQuery);
(function(a){a(window).load(function(){a('div[id^="wr-'+wr_nitro_customize_upload_font.type+'-"]').each(function(){var b=a(this);b.id=b.attr("id").replace("wr-"+wr_nitro_customize_upload_font.type+"-","");b.on("click",".upload-font",function(d){d.preventDefault();var e=window.wr_custom_font_selector;if(!e){e=wp.media({button:{text:a(this).text()},states:[new wp.media.controller.Library({title:a(this).text(),library:wp.media.query({type:["application/vnd.ms-fontobject","application/x-font-opentype","application/x-font-ttf","application/font-woff","application/font-woff2"]}),multiple:false,date:false})]});e.on("select",function(){var f=e.state().get("selection").first();if(f.attributes.url.match(/\.(eot|otf|ttf|woff|woff2)$/)){wp.customize.control(e.setting).setting.set(f.attributes.url)}});e.on("open",function(){e._checking_interval=setInterval(function(){var f=e.state().get("selection").first();if(f&&f.attributes&&f.attributes.url){if(!f.attributes.url.match(/\.(eot|otf|ttf|woff|woff2)$/)){e.reset()}}},50)});e.on("close",function(){clearInterval(e._checking_interval)});window.wr_custom_font_selector=e}e.control=a(this).closest(".customize-control-content"),e.setting=e.control.attr("id").replace("wr-"+wr_nitro_customize_upload_font.type+"-","");e.open()}).on("click","button.remove-font",function(d){d.preventDefault();wp.customize.control(b.id).setting.set("")});function c(d){b.find(".preview-font, .remove-font").addClass("hidden");b.find(".upload-font").text(wr_nitro_customize_upload_font.select_font_label);if(d){a.ajax({timeout:500,url:d,complete:function(g){if(g.status==200){var i=document.styleSheets[document.styleSheets.length-1],f=d.match(/\/([^\/\.]+)\.(eot|otf|ttf|woff|woff2)$/),h={"@font-face":'font-family: "'+f[1]+'"; src: url("'+d+'");'};h["#"+b.attr("id")+" > .preview-font"]='font-family: "'+f[1]+'";';for(var e in h){if(i.insertRule&&typeof i.cssRules!="undefined"&&i.cssRules!=null&&typeof i.cssRules.length!="undefined"){i.insertRule(e+" {"+h[e]+"}",i.cssRules.length)}else{if(i.addRule){i.addRule(e,h[e])}}}b.find(".preview-font, .remove-font").removeClass("hidden");b.find(".upload-font").text(wr_nitro_customize_upload_font.change_font_label)}}})}}wp.customize.control(b.id).setting.bind("change",c);c(wp.customize.control(b.id).setting.get())})})})(jQuery);
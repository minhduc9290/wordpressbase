(function(c){c.WrThemeMegamenu=c.WrThemeMegamenu||{};c.WrThemeMegamenu.data_save={};c.WrThemeMegamenu.allow_submit=false;function s(v){var u=v?".pending":"";c("#menu-to-edit > .menu-item"+u).each(function(){var y=c(this);if(y.find(".item-title .wrmm-show-modal").length){return}var x=parseInt(y.attr("id").split("menu-item-")[1]);var w=parseInt(y.attr("class").split("menu-item-depth-")[1].split(" ")[0]);y.find(".item-title").append('<span class="wrmm-show-modal button-primary">Settings</span>');c.WrThemeMegamenu.data_save[x]=k(x,w);if(w==0&&c.WrThemeMegamenu.data_save[x]["active"]==1){y.addClass("megamenu-active")}})}function r(){var v=c("#menu-to-edit > .menu-item");var u=false;c.each(v,function(x,z){var B=c(this);var A=parseInt(B.attr("class").split("menu-item-depth-")[1].split(" ")[0]);var y=c(v[x+1]);var w=A+1;if(y.hasClass("menu-item-depth-"+w)){if(!B.find(".menu-item-bar .wr-expand").length){B.find(".menu-item-bar").append('<span class="wr-expand"></span>')}}else{B.find(".menu-item-bar .wr-expand").remove()}})}function i(){var v=c("#menu-to-edit > .menu-item-depth-0");var u=false;c.each(v,function(w,x){var z=c(this);var y=parseInt(z.attr("id").split("menu-item-")[1]);c.WrThemeMegamenu.data_save[y]})}function n(){var u='<ul class="expand-collapse"><li class="expand-all">Expand all</li><li class="collapse-all">Collapse all</li></ul>';c(u).insertBefore("#menu-to-edit");c("body").on("click",".expand-collapse .expand-all",function(){c('#menu-to-edit > .menu-item:not(".menu-item-depth-0")').show();c("#menu-to-edit > .menu-item .wr-expand.collapse").removeClass("collapse")});c("body").on("click",".expand-collapse .collapse-all",function(){c('#menu-to-edit > .menu-item:not(".menu-item-depth-0")').hide();c("#menu-to-edit > .menu-item .wr-expand").addClass("collapse")});c("#menu-to-edit").on("click",".wr-expand",function(){var A=c(this);var x=true;if(A.hasClass("collapse")){A.removeClass("collapse");x=false}else{A.addClass("collapse")}var w=A.closest(".menu-item");var z=parseInt(w.attr("class").split("menu-item-depth-")[1].split(" ")[0]);var y=c("#menu-to-edit .menu-item");var v=y.index(w);c.each(y,function(B,D){if(B>v){var E=c(this);var C=parseInt(E.attr("class").split("menu-item-depth-")[1].split(" ")[0]);if(C<=z){return false}else{if(x){E.hide()}else{E.show();E.find(".wr-expand.collapse").removeClass("collapse")}}}})});c("#menu-to-edit").on("click",".item-delete",function(){var z=c(this);var w=z.closest(".menu-item");var y=parseInt(w.attr("class").split("menu-item-depth-")[1].split(" ")[0]);var x=c("#menu-to-edit .menu-item");var v=x.index(w);c.each(x,function(A,C){if(A>v){var D=c(this);var B=parseInt(D.attr("class").split("menu-item-depth-")[1].split(" ")[0]);if(B<=y){return false}else{D.show()}}})})}function l(){c.getJSON(wr_theme_megamenu.theme_url+"/assets/woorockets/fonts-json/fontawesome.json",function(u){if(u){c.WrThemeMegamenu.data_icon.font_awesome=u}})}var m;m=wpNavMenu;wpNavMenu.refreshAdvancedAccessibility=function(){c(".menu-item-settings .field-move a").hide();c("a.item-edit").data("needs_accessibility_refresh",true);c(".menu-item-edit-active a.item-edit").each(function(){m.refreshAdvancedAccessibilityOfItem(this)});r()};function k(x,w){var v=(w>1)?2:w;v++;var u={};if(c.WrThemeMegamenu.data_save[x]!=undefined){u=c.extend({},wrmm_data_default["lv_"+v],c.WrThemeMegamenu.data_save[x])}else{if(wr_theme_data_megamenu[x]!=undefined){u=c.extend({},wrmm_data_default["lv_"+v],wr_theme_data_megamenu[x])}else{u=wrmm_data_default["lv_"+v]}}u.level=w;return u}function h(){c("#menu-to-edit").on("click",".wrmm-show-modal",function(){var E=c(this);var y=E.closest(".menu-item");var A=parseInt(y.attr("id").split("menu-item-")[1]);var w=parseInt(y.attr("class").split("menu-item-depth-")[1].split(" ")[0]);c.WrThemeMegamenu.data_save[A]=k(A,w);var K=0;var D=0;if(w==0){K=parseInt(c.WrThemeMegamenu.data_save[A]["active"]);D=a(y);var L=(typeof c.WrThemeMegamenu.data_save[A]["row_layout"]!="undefined"&&typeof c.WrThemeMegamenu.data_save[A]["row_layout"]=="string")?c.WrThemeMegamenu.data_save[A]["row_layout"]:"";L=L.split(" + ");L=p(D,L).join(" + ");c.WrThemeMegamenu.data_save[A]["row_layout"]=f(L).join(" + ")}else{if(w==1){var J=y.prevAll(".menu-item-depth-0:first");var B=parseInt(J.attr("id").split("menu-item-")[1]);K=(c.WrThemeMegamenu.data_save[B]!=undefined)?c.WrThemeMegamenu.data_save[B]["active"]:0}}var F=g(y);var z=false;if(w==0&&y.next(".menu-item-depth-1").length!=0){z=true}var M=_.template(c("script#wrmm-template").html())({data_item:c.WrThemeMegamenu.data_save[A],active_parent:K,permission_parent:F,title_modal:y.find(".menu-item-title").text(),level:w,id:A,sidebars_area:wrmm_sidebars_area,"$":jQuery,item_lv_2:D,list_row:c.WrThemeMegamenu.list_row,list_icon:c.WrThemeMegamenu.data_icon,has_children:z});c("body").append(c("script#wrmm-modal-html").html());c(".wrmm-dialog").html(M);c(".wrmm-modal").addClass("main-settings");if(w==0){e()}if(w==1){j(c.WrThemeMegamenu.data_save[A]["element_type"],c.WrThemeMegamenu.data_save[A]["element_data"])}var G=c(".wrmm-dialog");var I=G[0].getBoundingClientRect();var C=c(window);var N=C.scrollTop();var H=C.height();var x=0;if(I.height<H){x=N+((H-I.height)/2)}else{x=N+10}G.css("top",x)});c("body").on("click",".wrmm-modal.main-settings .dialog-title .close",function(){c(this).closest(".wrmm-modal").remove()});c("body").on("click",".wrmm-modal.md-all-element .dialog-title .close, .wrmm-modal.md-select-icon .dialog-title .close",function(){c(this).closest(".wrmm-modal").remove();c(".wrmm-modal.main-settings.hidden").removeClass("hidden")});c("body").on("click",".wrmm-wrapper .nav-settings li",function(){var y=c(this);var w=y.closest(".wrmm-wrapper");var x=y.attr("data-nav");c(".wrmm-dialog .nav-settings .active").removeClass("active");c(".wrmm-dialog .option-settings .item-option.active").removeClass("active");y.addClass("active");c('.wrmm-dialog .option-settings .item-option[data-option="'+x+'"]').addClass("active")});c("body").on("click",".wrmm-wrapper .select-element .action .add-element",function(){var C=c(this);c(".wrmm-modal.main-settings").addClass("hidden");c("body").append(c("script#wrmm-modal-html").html());c(".wrmm-dialog:last").html(c("script#wrmm-all-element").html());c(".wrmm-modal:last").addClass("md-all-element");var A=c(".wrmm-dialog:last");var B=A[0].getBoundingClientRect();var x=c(window);var w=x.scrollTop();var z=x.height();var y=0;if(B.height<z){y=w+((z-B.height)/2)}else{y=w+10}A.css("top",y)});c("body").on("click",".wrmm-wrapper .chb-enable",function(){var A=c(this);var y=A.closest(".wrmm-wrapper");var z=c("#menu-item-"+y.attr("data-id"));var x=c("#menu-to-edit li.menu-item");if(c(this).is(":checked")){var w="1";y.find(".wrapper-option").stop(true,false).slideDown();z.addClass("megamenu-active")}else{var w="0";y.find(".wrapper-option").stop(true,false).slideUp();z.removeClass("megamenu-active")}d(A,w,"active")});c("body").on("change",".wrmm-wrapper .select-width",function(){var w=c(this).val();d(c(this),w,"width_type");if(w=="fixed"){c(this).closest(".width").find(".number-width-box").removeAttr("style")}else{c(this).closest(".width").find(".number-width-box").hide()}});c("body").on("blur",".wrmm-wrapper .number-width-box .number-width",function(){var w=c(this).val().replace(/[^0-9]/gi,"");d(c(this),w,"width")});c("body").on("click",".wr-uploader-media .wr-image-button",function(){var z=c(this);var x=z.closest(".wrmm-wrapper");var y=x.find(".wr-image-link");var w=x.find(".background-option");if(!window.wr_media){window.wr_media=wp.media({frame:"post",multiple:false,button:{text:"Insert"}})}window.wr_media.off("insert").on("insert",function(D){z.closest(".wrmm-modal").removeClass("hidden");var B=window.wr_media.state().get("selection").first().toJSON();var C=c(".attachment-display-settings .size").val();var A=B.sizes[C]["url"];y.val(A);y.focus();w.show()});window.wr_media.off("close").on("close",function(A){z.closest(".wrmm-modal").removeClass("hidden")});window.wr_media.open();z.closest(".wrmm-modal").addClass("hidden")});c("body").on("click",".wr-uploader-media .wr-image-remove",function(){var z=c(this);var x=z.closest(".wrmm-wrapper");var y=x.find(".wr-image-link");var w=x.find(".background-option");y.val("");y.focus();w.hide()});c("body").on("blur",".wrmm-wrapper .background-image .wr-uploader-media .wr-image-link",function(){var z=c(this);var w=z.val();var y=z.closest(".wrmm-wrapper");var x=y.find(".background-option");d(z,w,"background_image");if(w==""){x.hide()}else{x.show()}});c("body").on("change",".wrmm-wrapper .background-size",function(){var x=c(this);var w=x.val();d(x,w,"background_size")});c("body").on("change",".wrmm-wrapper .background-position",function(){var x=c(this);var w=x.val();d(x,w,"background_position")});c("body").on("change",".wrmm-wrapper .background-repeat",function(){var x=c(this);var w=x.val();d(x,w,"background_repeat")});c("body").on("change",".wrmm-wrapper .txt-select-color",function(){var x=c(this);var w=x.val();d(x,w,"background_color")});c("body").on("click",".wrmm-wrapper .checkbox-column",function(){if(c(this).is(":checked")){var w="1"}else{var w="0"}d(c(this),w,"disable_title")});c("body").on("click",".wrmm-wrapper .list-layout li",function(){var A=c(this);var z=A.closest(".wrmm-wrapper");var y=z.find(".list-layout li");var x=z.find(".row-text .row-txt");var w=A.attr("title");d(c(this),w,"row_layout");y.removeClass("active");A.addClass("active");x.val(w);x.focus()});c("body").on("keyup",".wrmm-wrapper .row-text .row-txt",_.debounce(function(){var B=c(this);var z=B.closest(".wrmm-wrapper");var y=z.find(".list-layout li");var A=B.val();var x=f(A);var w=x.join(" + ");y.removeClass("active");z.find('.list-layout li[title="'+w+'"]').addClass("active")},1000));c("body").on("blur",".wrmm-wrapper .row-text .row-txt",function(){var y=c(this);var B=y.val();var C=y.closest(".wrmm-wrapper");var E=C.attr("data-id");var z=f(B);var x=c("#menu-item-"+E);var D=C.find(".list-layout li");var w=a(x);var A=p(w,z).join(" + ");D.removeClass("active");C.find('.list-layout li[title="'+A+'"]').addClass("active");y.val(A);d(y,A,"row_layout")});c("body").on("click",".wrmm-wrapper .permission .list-show .chb-of",function(){var x=c(this);if(x.is(":checked")){var w=x.val();d(x,w,"permission_show");if(w=="log-in"){x.closest(".permission").find(".type-member-row").show()}else{x.closest(".permission").find(".type-member-row").hide()}}});c("body").on("click",".wrmm-wrapper .permission .type-member .chb-of",function(){var B=c(this);var x=B.closest(".type-member");var A=x.find(".chb-of");var w=[];if(A.length){var y=B.val();if(y=="all"){if(B.is(":checked")){A.prop("checked",true)}else{A.prop("checked",false)}}else{if(B.is(":checked")){var z=x.find(".chb-of:checked").length;if(z>=A.length-1){x.find('.chb-of[value="all"]').prop("checked",true)}}else{x.find('.chb-of[value="all"]').prop("checked",false)}}c.each(A,function(){if(c(this).is(":checked")){w.push(c(this).val())}})}d(B,w,"permission_user")});c("body").on("keyup",".md-select-icon .wrmm-list-icon .search",function(){var y=c(this);var x=y.val().toLowerCase();var w=y.closest(".wrmm-list-icon").find(".list-icon ul li");q(x,w)});c("body").on("click",".md-select-icon .wrmm-list-icon li",function(){var z=c(this);var y=z.html();var x=c(".wrmm-modal.main-settings .menu-icon");var w=z.find("i").attr("class");x.find(".delete-position.data-empty").removeClass("data-empty");x.find(".delete-position .get-delete .get").html(y);d(c(".wrmm-modal.main-settings .menu-icon"),w,"icon");c(".wrmm-modal.md-select-icon").remove();c(".wrmm-modal.main-settings.hidden").removeClass("hidden")});c("body").on("click",".wrmm-wrapper .menu-icon .get-delete .delete",function(){var y=c(this);var x=confirm("Do you really want to delete this icon?");if(!x){return}var w=y.closest(".menu-icon");c(".wrmm-wrapper .menu-icon .list-icon li.active").removeClass("active");y.closest(".delete-position").addClass("data-empty");d(y,"","icon")});c("body").on("click",".wrmm-wrapper .menu-icon .get-delete .add-icon, .wrmm-wrapper .menu-icon .get-delete .added-icon .get",function(){var A=c(this);c(".wrmm-modal.main-settings").addClass("hidden");c("body").append(c("script#wrmm-modal-html").html());var z="";if(!A.hasClass("add-icon")){var x=A.closest(".wrmm-wrapper").attr("data-id");z=c.WrThemeMegamenu.data_save[x]["icon"]}var w=_.template(c("script#wrmm-select-icon").html())({list_icon:c.WrThemeMegamenu.data_icon.font_awesome,icon_active:z});c(".wrmm-dialog:last").html(w);c(".wrmm-modal:last").addClass("md-select-icon");var E=c(".wrmm-dialog:last");var B=E[0].getBoundingClientRect();var F=c(window);var C=F.scrollTop();var D=F.height();var y=0;if(B.height<D){y=C+((D-B.height)/2)}else{y=C+10}E.css("top",y)});c("body").on("click",".wrmm-wrapper .menu-icon .delete-position .position li",function(){var x=c(this);c(".wrmm-wrapper .menu-icon .delete-position .position li.active").removeClass("active");x.addClass("active");var w=x.attr("data-value");d(x,w,"icon_position")});c("body").on("click",".wrmm-list-element .item",function(){var z=c(this);var y="element-"+z.attr("data-value");var x=c(".wrmm-modal.main-settings");var w="";c(".wrmm-modal.md-all-element").remove();c(".wrmm-modal.main-settings.hidden").removeClass("hidden");j(y,"");switch(y){case"element-text":w="Text element";break;case"element-products":w="Products element";break;case"element-categories":w="Product categories element";break;case"element-widget":w="Widget element";break}c(".wrmm-wrapper .select-element .action.not-element").removeClass("not-element");c(".wrmm-wrapper .select-element .action .added-element span").html(w);d(c(".wrmm-modal.main-settings .select-element"),y,"element_type")});c("body").on("click",".wrmm-wrapper .select-element .action .added-element .delete",function(){var x=c(this);var w=confirm("Do you really want to delete this element?");if(!w){return}c(".wrmm-wrapper .select-element .action").addClass("not-element");c(".wrmm-wrapper .select-element .content-element").html("");d(x,"","element_type");d(x,"","element_data")});c("body").on("blur",".wrmm-wrapper .wrmm-text-element .wrmm-editor",function(y){var z=c(y.currentTarget);var x=window.switchEditors._wp_Autop(z.val());var w=z.closest(".editor-wrapper").find(".wrmm-editor-hidden");w.val(x).trigger("change")});c("body").on("change",".wrmm-wrapper .wrmm-text-element .wrmm-editor-hidden",function(x){var y=c(this);var w=y.val();d(y,w,"element_data")});c("body").on("change",".wrmm-wrapper .wrmm-widget-element .wrmm-list-widget",function(x){var y=c(this);var w=y.val();d(y,w,"element_data")});var u,v=true;c("body").on("keyup",".wrmm-wrapper .wrmm-products-element .search-product .search-ajax .product-ajax",function(){var x=c(this);var w=x.closest(".search-ajax");if(u){clearTimeout(u)}u=setTimeout(function(){var y=x.val();w.find(".loading-search").remove();w.find(".results-search").remove();if(v!==true&&y==v&&!w.find(".loading-search").length){return}v=y;if(y==""||y.length<3){return}w.append('<img class="loading-search" src="images/spinner.gif">');x.closest(".element-item").addClass("loading-wrls");c.ajax({type:"POST",url:wr_theme_megamenu.ajaxurl,data:{action:"wrmm_products",keyword:y,_nonce:wr_theme_megamenu._nonce},success:function(z){var z=(z)?JSON.parse(z):"";w.find(".loading-search").remove();w.find(".results-search").remove();w.append('<div class="results-search"></div>');if(z.message){w.find(".results-search").append('<div class="wrmm-no-results">'+z.message+"</div>")}else{w.find(".results-search").append('<div class="list-products"></div>');c.each(z.list_product,function(A,B){w.find(".list-products").append('<div class="item" data-id="'+B.id+'"><div class="img">'+B.image+'</div><div class="title-price"><div class="name-product">'+B.title+'</div><div class="price">'+B.price+"</div></div></div>")})}}})},300)});c("body").on("focus",".wrmm-wrapper .wrmm-products-element .search-product .search-ajax .product-ajax",function(){var w=c(this).closest(".search-ajax");w.find(".loading-search").remove();w.find(".results-search").show()});c("body").on("blur",".wrmm-wrapper .wrmm-products-element .search-product .search-ajax .product-ajax",function(){var w=c(this).closest(".search-ajax");w.find(".loading-search").remove();w.find(".results-search").hide()});c("body").on("mousedown",".wrmm-wrapper .search-ajax .results-search .list-products .item",function(){var C=c(this);var A=C.closest(".wrmm-wrapper");var z=C.attr("data-id");var y=A.attr("data-id");var B=C[0].outerHTML;A.find(".wrmm-products-element .products-added .list-products").append(B);if(typeof c.WrThemeMegamenu.data_save[y]["element_data"]=="undefined"){var w=z}else{var x=c.WrThemeMegamenu.data_save[y]["element_data"].split(",");x.push(z);var w=x.join(",")}d(C,w,"element_data");A.find(".products-added .item:last").append('<i class="del-product dashicons dashicons-no-alt"></i>');A.find(".wrmm-products-element .search-ajax .results-search").hide();C.remove()});c("body").on("click",".wrmm-wrapper .products-added .del-product",function(){var B=c(this);var A=B.closest(".wrmm-wrapper");var z=B.closest(".item");var y=z.attr("data-id");var x=A.attr("data-id");if((typeof c.WrThemeMegamenu.data_save[x]!="undefined")&&(typeof c.WrThemeMegamenu.data_save[x]["element_data"]!="undefined")){var w=c.WrThemeMegamenu.data_save[x]["element_data"];w=w.split(",");w=_.without(w,y);w=w.join();d(B,w,"element_data")}z.remove()});c("body").on("focus",".wrmm-wrapper .categories-ajax",function(){var w=c(this);w.trigger("keyup")});c("body").on("keyup",".wrmm-wrapper .categories-ajax",function(){var z=c(this);var w=z.val();var y=z.parent();var x=y.find(".item-categories");if(x.length){y.find(".list-categories").show()}if(w){if(window.keyword_font_old==undefined||window.keyword_font_old!=w){x.hide();x.each(function(){var C=c(this);var A=(C.attr("data-search")!=undefined)?C.attr("data-search").toLowerCase():"";var B=w.toLowerCase().trim();if(A.indexOf(B)==-1){C.hide()}else{C.show()}});window.keyword_font_old=w}}else{x.show()}});c("body").on("blur",".wrmm-wrapper .categories-ajax",function(){var x=c(this);var w=x.parent();w.find(".list-categories").hide()});c("body").on("mousedown",".wrmm-wrapper .search-categories .item-categories",function(){var C=c(this);var A=C.closest(".wrmm-wrapper");var B=C.attr("data-id");var z=A.attr("data-id");var y=C[0].outerHTML;A.find(".wrmm-category-element .category-added").append(y);if(typeof c.WrThemeMegamenu.data_save[z]["element_data"]=="undefined"){var w=B}else{var x=c.WrThemeMegamenu.data_save[z]["element_data"].split(",");x.push(B);var w=x.join(",")}d(C,w,"element_data");A.find(".category-added .item-categories:last").append('<i class="del-category dashicons dashicons-no-alt"></i>');A.find(".wrmm-category-element .search-ajax .list-categories").hide()});c("body").on("click",".wrmm-category-element .category-added .del-category",function(){var B=c(this);var A=B.closest(".wrmm-wrapper");var y=B.closest(".item-categories");var z=y.attr("data-id");var x=A.attr("data-id");if((typeof c.WrThemeMegamenu.data_save[x]!="undefined")&&(typeof c.WrThemeMegamenu.data_save[x]["element_data"]!="undefined")){var w=c.WrThemeMegamenu.data_save[x]["element_data"];w=w.split(",");w=_.without(w,z);w=w.join();d(B,w,"element_data")}y.remove()});c(".wp-admin #update-nav-menu").on("submit",function(w){if(Object.keys(c.WrThemeMegamenu.data_save).length){if(!c(".wrmm-loading").length){c(".major-publishing-actions .publishing-action").prepend('<img class="wrmm-loading" src="images/spinner.gif" />')}if(c(".wrmm-error").length){c(".wrmm-error").remove()}if(c.WrThemeMegamenu.allow_submit==false){w.preventDefault();b()}}})}function j(v,x){var w="";switch(v){case"element-text":var z=c("script#wrmm-text-element").html();z=z.replace("_WR_CONTENT_",x);c(".wrmm-wrapper .select-element .content-element").html(z);var A=function(){var D=5000;var E=100;var B=true;var C=setInterval(function(){if(B||E>=D){(function(){var G,H,F;for(H in tinyMCEPreInit.mceInit){if(H!="wrmm-editor"){continue}G=tinyMCEPreInit.mceInit[H];F=tinymce.$("#wp-"+H+"-wrap");tinymce.remove(tinymce.get("wrmm-editor"));tinymce.init(G);setTimeout(function(){c("#wp-wrmm-editor-wrap").removeClass("html-active");c("#wp-wrmm-editor-wrap").addClass("tmce-active")},10);if(!window.wpActiveEditor){window.wpActiveEditor=H}break}for(H in tinyMCEPreInit.qtInit){if(H!="wrmm-editor"){continue}quicktags(tinyMCEPreInit.qtInit[H]);QTags._buttonsInit();if(!window.wpActiveEditor){window.wpActiveEditor=H}break}}());B=false;window.clearInterval(C)}},E)};A();break;case"element-products":if(wr_theme_megamenu.active_wc!=1){break}if(x){var u=c(".wrmm-wrapper .select-element .content-element");u.html('<img class="loading-search" src="images/spinner.gif" />');c.ajax({type:"POST",url:wr_theme_megamenu.ajaxurl,data:{action:"wrmm_get_products",list_id:x,_nonce:wr_theme_megamenu._nonce},success:function(B){var B=(B)?JSON.parse(B):"";var C=_.template(c("script#wrmm-products-element").html())({"$":jQuery,list_product:B});u.html(C)}})}else{var y=_.template(c("script#wrmm-products-element").html())({"$":jQuery,list_product:x});c(".wrmm-wrapper .select-element .content-element").html(y)}break;case"element-categories":if(wr_theme_megamenu.active_wc!=1){break}var y=_.template(c("script#wrmm-category-element").html())({"$":jQuery,list_categories:x,all_categories:wrmm_category});c(".wrmm-wrapper .select-element .content-element").html(y);break;case"element-widget":var y=_.template(c("script#wrmm-widget-element").html())({"$":jQuery,sidebars_area:wrmm_sidebars_area,value:x});c(".wrmm-wrapper .select-element .content-element").html(y);c(".wrmm-wrapper .wrmm-widget-element .wrmm-list-widget").trigger("change");break}return w}function q(v,u){if(v){u.each(function(){var x=c(this);var w=c(this).attr("data-value").toLowerCase();if(w.indexOf(v)==-1){x.hide()}else{x.fadeIn(300)}})}else{u.show()}}function b(){var u={};c.each(c.WrThemeMegamenu.data_save,function(v,w){u[v]={};c.each(w,function(y,x){if(typeof x=="string"){x=x.trim()}if(x!==""){switch(w.level){case 0:if(typeof wrmm_data_default.lv_1[y]!="undefined"&&wrmm_data_default.lv_1[y]!=x){u[v][y]=x}break;case 1:if(typeof wrmm_data_default.lv_2[y]!="undefined"&&wrmm_data_default.lv_2[y]!=x){u[v][y]=x}break;default:if(typeof wrmm_data_default.lv_3[y]!="undefined"&&wrmm_data_default.lv_3[y]!=x){u[v][y]=x}}}})});c.ajax({type:"POST",url:wr_theme_megamenu.ajaxurl,data:{action:"wr_save_megamenu",_nonce:wr_theme_megamenu._nonce,menu_id:wr_theme_megamenu.menu_id,data:u,data_last_update:"ok"},success:function(v){var v=(v)?JSON.parse(v):"";if(v.status=="true"){if(c(".wrmm-error").length){c(".wrmm-error").remove()}c.WrThemeMegamenu.allow_submit=true;c(".wp-admin #update-nav-menu").submit()}else{if(v.status=="updating"){c.each(v.list_id_updated,function(x,w){delete c.WrThemeMegamenu.data_save[w]});c.WrThemeMegamenu.save_ajax()}else{if(v.status=="false"){if(c(".wrmm-loading").length){c(".wrmm-loading").remove()}c(".major-publishing-actions .publishing-action").prepend('<p class="wrmm-error">'+v.message+"</p>")}}}}})}function a(z){var w=z.next(".menu-item-depth-1");var v=0;if(w.length){var y=z.nextAll(".menu-item-depth-0");if(y.length){var u=c("#menu-to-edit > .menu-item");var x=u.index(y[0]);var B=u.index(z);for(var A=B+2;A<=x;A++){if(c("#menu-to-edit .menu-item:nth-child("+A+")").hasClass("menu-item-depth-1")){v++}}}else{var C=z.nextAll(".menu-item-depth-1");v=C.length}}return v}function g(z){var E={permission_show:null,permission_user:null};var v=parseInt(z.attr("id").split("menu-item-")[1]);var u=parseInt(z.attr("class").split("menu-item-depth-")[1].split(" ")[0]);if(u==0){E={permission_show:c.WrThemeMegamenu.data_save[v]["permission_show"],permission_user:c.WrThemeMegamenu.data_save[v]["permission_user"]}}else{var B=z.prevAll();var C=B.length;var w={};for(var y=C-1;y>=0;y--){var A=c(B[y]);var D=parseInt(A.attr("id").split("menu-item-")[1]);var x=parseInt(A.attr("class").split("menu-item-depth-")[1].split(" ")[0]);if(x<u){w[x]={permission_show:c.WrThemeMegamenu.data_save[D]["permission_show"],permission_user:c.WrThemeMegamenu.data_save[D]["permission_user"]}}}c.each(w,function(H,G){var F=false;if(H==0){if(G.permission_show=="log-in"){E.permission_user=G.permission_user}else{E.permission_user="all"}}else{if(E.permission_user.length==0){E.permission_user="";F=true}else{if(E.permission_show!="log-in"){if(G.permission_show=="log-in"){E.permission_user=G.permission_user}else{E.permission_user="all"}}else{if(E.permission_user.indexOf("all")!=-1){E.permission_user=G.permission_user}else{if(G.permission_user.indexOf("all")!=-1){E.permission_user=E.permission_user}else{E.permission_user=o(G.permission_user,E.permission_user)}}}}}E.permission_show=F?"log-in":G.permission_show})}return E}function o(v,u){return c.grep(v,function(w){return c.inArray(w,u)>-1})}function d(v,w,u){if(u){var x=v.closest(".wrmm-wrapper").attr("data-id");c.WrThemeMegamenu.data_save[x][u]=w}}function f(y){var v=y.split("+");var u=[];var x=function(C){if(C.search("/")!=-1){var z=C.split("/");var A=Math.abs(parseInt(z[0]))?Math.abs(parseInt(z[0])):1;var B=Math.abs(parseInt(z[1]))?Math.abs(parseInt(z[1])):1;return A+"/"+B}else{var z=Math.abs(parseInt(C))?Math.abs(parseInt(C)):1;return z+"/1"}};if(v.length){c.each(v,function(z,B){var A=x(B);u.push(A)})}else{var w=x(val);u.push(w)}return u}function p(x,u){if(x==0){return[]}var w=u.length-x;if(w>0){for(var v=w;v>0;v--){u.splice(x+v-1,1)}}else{if(w<0){for(var v=Math.abs(w);v>0;v--){u.push("1/1")}}}return u}function e(){c(".wrmm-wrapper .txt-select-color").spectrum({color:"",showInput:true,showInitial:true,allowEmpty:true,showAlpha:true,clickoutFiresChange:true,showButtons:true,cancelText:"Cancel",chooseText:"Choose",preferredFormat:"rgb",show:function(w){c(".sp-button-container .sp-default").remove();c(".sp-button-container").prepend('<a class="sp-default" href="#">Default</a>');var x=c(this);var u=w?(w.getAlpha()==1?w.toHexString():w.toRgbString()):"";var v=x.parents(".wr-hb-colors-control");c(".sp-default").off("click").on("click",function(y){y.preventDefault();x.spectrum("set",u);x.siblings(".show-color").text(u);x.val(u).trigger("blur");c(".sp-container:visible").find(".sp-input").val(u)});c(".sp-clear").off("click").on("click",function(y){y.preventDefault();x.spectrum("set","");x.siblings(".show-color").text("");x.val("").trigger("blur");c(".sp-container:visible").find(".sp-input").val("")});c(".sp-container:visible").find(".sp-input").val(u)},move:function(u){if(!u){return}var v=u.getAlpha()==1?u.toHexString():u.toRgbString();var w=c(this);w.siblings(".show-color").text(v);c(".sp-container:visible").find(".sp-input").val(v);w.val(v).trigger("change")},change:function(u){if(!u){return}var v=u.getAlpha()==1?u.toHexString():u.toRgbString();var w=c(this);w.siblings(".show-color").text(v);w.val(v).trigger("change");c(".sp-container:visible").find(".sp-input").val(v)}})}function t(){c(document).ajaxComplete(function(w,y,v){var u=v.url;var x=(typeof v.data!="undefined")?v.data:"";if(x.search("action=add-menu-item")!=-1){s(true)}})}c.WrThemeMegamenu.list_row=["1/1","1/2 + 1/2","2/3 + 1/3","1/3 + 2/3","1/4 + 3/4","3/4 + 1/4","1/5 + 4/5","4/5 + 1/5","1/6 + 5/6","5/6 + 1/6","1/3 + 1/3 + 1/3","1/4 + 1/4 + 2/4","2/4 + 1/4 + 1/4","1/5 + 1/5 + 3/5","3/5 + 1/5 + 1/5","1/6 + 1/6 + 4/6","4/6 + 1/6 + 1/6","1/4 + 1/4 + 1/4 + 1/4","1/5 + 1/5 + 1/5 + 2/5","2/5 + 1/5 + 1/5 + 1/5","1/6 + 1/6 + 1/6 + 3/6","3/6 + 1/6 + 1/6 + 1/6","1/5 + 1/5 + 1/5 + 1/5 + 1/5","1/6 + 1/6 + 1/6 + 1/6 + 2/6","2/6 + 1/6 + 1/6 + 1/6 + 1/6","1/6 + 1/6 + 1/6 + 1/6 + 1/6 + 1/6"];c.WrThemeMegamenu.data_icon={font_awesome:{},font_icomoon:{},dashicons:{}};s(false);h();t();r();n();l()})(jQuery);
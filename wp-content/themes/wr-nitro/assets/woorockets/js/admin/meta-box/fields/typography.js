(function(a){a.WR_Typography_Field=function(c,d){var b=this;b.field=c;b.text=d;b.init()};a.WR_Typography_Field.prototype={init:function(){var b=this;b.container=a("#"+b.field.id);b.input_color=b.container.find("input.color-picker");b.input_color.spectrum({color:b.input_color.val(),showInput:true,showInitial:true,allowEmpty:true,showAlpha:true,clickoutFiresChange:true,cancelText:b.text.cancel?b.text.cancel:"Cancel",chooseText:b.text.choose?b.text.choose:"Choose",preferredFormat:"hex",show:function(){if(!a(".sp-default").length){a(".sp-cancel").after('<a class="sp-default" href="#">'+(b.text["default"]?b.text["default"]:"Default")+"</a>")}a(".sp-default").off("click").on("click",function(c){c.preventDefault();a(b.input_color).spectrum("set",a(b.input_color).attr("default-value"));a(b.input_color).parent().children(".font-color").text(a(b.input_color).attr("default-value"))})},move:function(c){a(b.input_color).parent().children(".font-color").text("");if(c){a(b.input_color).parent().children(".font-color").text(c.getAlpha()==1?c.toHexString():c.toRgbString())}}});b.container.find(".wr-image-selected").click(function(c){c.preventDefault();a(this).next().toggle()});b.container.find(".wr-select-image").click(function(){if(!a(this).hasClass("selected")){var c=a(this).attr("data-value");b.container.find(".wr-image-selected span").text(c);a(this).parent().next("input").val(c);c=c.toLowerCase().replace(/\s+/g,"-");b.container.find(".wr-image-selected").attr("class","").addClass("wr-image-selected "+c);a(this).parent().parent().toggle();a(this).parent().children(".selected").removeClass("selected");a(this).addClass("selected")}});b.container.on("click",'input[type="checkbox"]',function(){a(this).parent()[a(this).attr("checked")?"addClass":"removeClass"]("active")});b.container.on("change","input.color-picker",function(){var c=a(this).spectrum("get"),d=c?(c.getAlpha()==1?c.toHexString():c.toRgbString()):"";if(a(this).val()!=d){a(this).val(d)}});a("body").on("keyup",".wr-select-image-container .txt-sfont",function(d){var g=a(this);var c=g.val();var f=g.closest(".wr-select-image-container").find("li");if(c){if(window.keyword_font_old==undefined||window.keyword_font_old!=c||d.keyCode==13||d.keyCode==86){f.hide();f.each(function(){var e=(a(this).attr("data-value")!=undefined)?a(this).attr("data-value").toLowerCase():"";var h=c.toLowerCase().trim();if(e.indexOf(h)==-1){a(this).hide()}else{a(this).fadeIn(200)}});window.keyword_font_old=c}}else{f.show()}})}}})(jQuery);